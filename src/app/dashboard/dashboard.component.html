<div class="dashboard-flex">

  <div class="main-content">
    <div class="tabs-center">
      <app-tabs (tabSelected)="selectTab($event)" [selectedTab]="selectedTab"></app-tabs>
    </div>
    <div class="dashboard-container">
      <div *ngIf="selectedTab === 'leads'">
        <app-leads></app-leads>
      </div>
      <div *ngIf="selectedTab === 'customers'">
        <app-customers></app-customers>
      </div>
      <div *ngIf="selectedTab === 'portfolio'">
        <app-portfolio></app-portfolio>
      </div>
      <div *ngIf="selectedTab === 'performance'">
        <app-performance></app-performance>
      </div>
    </div>
  </div>

  <div class="chat-sidebar" [ngClass]="{ 'chat-open': isChatOpen, 'chat-closed': !isChatOpen }">
    <div class="chat-header">
      <h3>ðŸ’¬ Chat Support</h3>
      <button class="close-chat-btn" (click)="toggleChat()" title="Close Chat">Ã—</button>
    </div>

    <div class="chat-messages" #chatMessages>
      <div class="message" *ngFor="let message of messages">
        <p [ngClass]="{ user: message.isUser, bot: !message.isUser }">
          {{ message.text }}
        </p>
      </div>
    </div>

    <div class="chat-input-container">
      <input type="text" class="chat-input" [(ngModel)]="currentMessage" (keypress)="handleKeyPress($event)"
        placeholder="Type your message..." />
      <button class="send-btn" (click)="sendMessage()">Send</button>
    </div>
  </div>

</div>

<!-- Chat Toggle Button (when chat is closed) -->
<button class="chat-toggle-btn" *ngIf="!isChatOpen" (click)="toggleChat()" title="Open Chat Support">
  ðŸ’¬
</button>

<!-- Chat Sidebar -->
<div class="chat-sidebar" [ngClass]="{ 'chat-open': isChatOpen, 'chat-closed': !isChatOpen }">
  <div class="chat-header">
    <h3>ðŸ’¬ Chat Support</h3>
    <button class="close-chat-btn" (click)="toggleChat()" title="Close Chat">Ã—</button>
  </div>

  <div class="chat-messages" #chatMessages>
    <div class="message" *ngFor="let message of messages">
      <p [ngClass]="{ user: message.isUser, bot: !message.isUser }">
        {{ message.text }}
      </p>
    </div>
  </div>

  <div class="chat-input-container">
    <input type="text" class="chat-input" [(ngModel)]="currentMessage" (keypress)="handleKeyPress($event)"
      placeholder="Type your message..." />
    <button class="send-btn" (click)="sendMessage()">Send</button>
  </div>
</div>